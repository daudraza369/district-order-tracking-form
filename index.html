<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Flower Order Tracking - Florist</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#9D84C1",
            "primary-dark": "#7e62a8",
            "primary-light": "#f3e8ff",
            "background-light": "#fdfbfc",
            "background-dark": "#0f172a",
          },
          fontFamily: {
            display: ["Inter", "sans-serif"],
          },
          borderRadius: {
            DEFAULT: "12px",
          },
        },
      },
    };
  </script>
  <style>
    body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
    body { min-height: max(884px, 100dvh); }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    #barcodeScanSuccess { transition: opacity 0.2s ease; }
    #barcodeScanSuccess .scan-tick { transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
    #barcodeScanSuccess .scan-tick.scale-in { transform: scale(1); }
    #barcodeScanSuccess .scan-tick.scale-out { transform: scale(0); }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 antialiased">
  <header class="fixed top-0 left-0 right-0 z-50 flex justify-center">
  <div class="w-full max-w-md h-16 flex items-center justify-between px-4 bg-white dark:bg-slate-900 border-b border-slate-100 dark:border-slate-800">
    <h1 class="text-lg font-bold tracking-tight text-slate-800 dark:text-white">Flower Order Tracking</h1>
    <div class="w-10 h-10 rounded-lg flex items-center justify-center overflow-hidden">
      <img alt="Florist Logo" class="w-full h-full object-contain" src="DF — Favicon.png">
    </div>
  </div>
</header>

  <main class="pt-28 pb-32 px-4 max-w-md mx-auto">
    <div id="message" class="message" aria-live="polite"></div>

    <form id="orderForm" class="space-y-6" novalidate>
      <div class="space-y-4">
        <h2 class="text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 px-1">Order Information</h2>
        <div class="space-y-4 bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700/50">
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="chatwootId"><span>Chatwoot Id</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">تشاتووت</span></label>
            <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors" id="chatwootId" name="chatwootId" type="text" placeholder="e.g. 12345">
          </div>
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="orderType"><span>Order Type</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">النوع</span></label>
            <select class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors pr-10" id="orderType" name="orderType">
              <option value="">Select order type</option>
              <option value="B2B">B2B</option>
              <option value="B2C">B2C</option>
            </select>
          </div>
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="leadSource"><span>Lead Source</span></label>
            <select class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors pr-10" id="leadSource" name="leadSource">
              <option value="">Select lead source</option>
              <option value="WhatsApp">WhatsApp</option>
              <option value="Insta">Insta</option>
              <option value="TikTok">TikTok</option>
              <option value="Web">Web</option>
              <option value="Call">Call</option>
              <option value="Lead Form">Lead Form</option>
            </select>
          </div>
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="fulfillment"><span>Delivery or Pickup</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">توصيل/استلام</span></label>
            <select class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors pr-10" id="fulfillment" name="fulfillment">
              <option value="">Select</option>
              <option value="Delivery">Delivery</option>
              <option value="Pickup">Pickup</option>
              <option value="Priority Delivery">Priority Delivery</option>
            </select>
          </div>
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="campaign"><span>Campaign</span></label>
            <select class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors pr-10" id="campaign" name="campaign">
              <option value="">Loading...</option>
            </select>
          </div>
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="product"><span>Product</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">المنتج</span></label>
            <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors" id="product" name="product" type="text" placeholder="Product name or description">
          </div>
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300"><span>Barcodes</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">الباركود</span></label>
            <button type="button" id="barcodeScanBtn" class="w-full py-3 px-4 rounded-lg bg-primary hover:bg-primary-dark text-white font-medium transition-colors flex items-center justify-center gap-2">
              <span>Scan Barcode</span>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"/></svg>
            </button>
            <div id="barcodeList" class="mt-3 space-y-2 min-h-[1rem]"></div>
            <input type="hidden" id="barcodes" name="barcodes" value="">
          </div>
          <!-- Barcode scanner modal -->
          <div id="barcodeScannerModal" class="fixed inset-0 z-[100] hidden bg-black/80 flex flex-col items-center justify-center p-4 relative">
            <div class="w-full max-w-md bg-white dark:bg-slate-800 rounded-2xl overflow-hidden">
              <div class="p-4 flex justify-between items-center border-b border-slate-200 dark:border-slate-700">
                <span class="font-semibold">Scan barcode</span>
                <button type="button" id="barcodeScanClose" class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700">✕</button>
              </div>
              <div id="barcodeScanner" class="w-full aspect-square max-h-[70vh] bg-black relative"></div>
              <p class="p-3 text-sm text-slate-500 text-center">Point camera at barcode</p>
            </div>
            <div id="barcodeScanSuccess" class="absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 z-[101]" style="background: rgba(157,132,193,0.25);">
              <div class="scan-tick scale-out w-20 h-20 rounded-full flex items-center justify-center" style="background: #9D84C1; box-shadow: 0 4px 20px rgba(157,132,193,0.5);">
                <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
                </svg>
              </div>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="quantity"><span>Quantity</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">الكمية</span></label>
              <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors" id="quantity" name="quantity" type="number" min="0" placeholder="0">
            </div>
            <div>
              <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="invoiceNo"><span>Invoice No</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">الفاتورة</span></label>
              <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors" id="invoiceNo" name="invoiceNo" type="text">
            </div>
          </div>
          <div class="space-y-4">
            <div class="isolate">
              <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="orderDate"><span>Order Date</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">تاريخ الطلب</span></label>
              <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors pr-10" id="orderDate" name="orderDate" type="date">
            </div>
            <div id="requestedDateWrap" class="isolate hidden">
              <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="requestedDate"><span>Requested Date</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">تاريخ المطلوب</span></label>
              <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors pr-10" id="requestedDate" name="requestedDate" type="date">
            </div>
            <div id="requestedTimeWrap" class="isolate hidden">
              <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="requestedTime"><span>Requested Time</span></label>
              <p id="requestedTimeHint" class="text-xs text-slate-500 dark:text-slate-400 mb-1.5 flex items-center justify-between"><span>When do they need the order?</span><span dir="rtl">متى يحتاجون الطلب؟</span></p>
              <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors pr-10" id="requestedTime" name="requestedTime" type="time">
            </div>
          </div>
        </div>
      </div>

      <div class="space-y-4">
        <h2 class="text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 px-1">Customer Details</h2>
        <div class="space-y-4 bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700/50">
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="customerName"><span>Customer Name</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">الاسم</span></label>
            <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors" id="customerName" name="customerName" type="text" placeholder="Full name">
          </div>
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="email"><span>Email</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">الإيميل</span></label>
            <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors" id="email" name="email" type="email" placeholder="customer@example.com">
          </div>
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="contactNumber"><span>Contact Number</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">الجوال</span></label>
            <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors" id="contactNumber" name="contactNumber" type="tel" placeholder="Phone number">
          </div>
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="deliveryAddress"><span>National Address</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">العنوان الوطني</span></label>
            <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors" id="deliveryAddress" name="deliveryAddress" type="text" placeholder="8-digit national address code" maxlength="8" inputmode="numeric" pattern="[0-9]*">
          </div>
          <div>
            <label class="flex items-center justify-between text-sm font-medium mb-1.5 text-slate-600 dark:text-slate-300" for="area"><span>District</span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">الحي</span></label>
            <input class="w-full bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded-lg focus:ring-primary focus:border-primary py-2.5 px-4 text-sm transition-colors" id="area" name="area" type="text" placeholder="Enter district">
          </div>
        </div>
      </div>

      <div class="space-y-4">
        <h2 class="text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 px-1">Payment</h2>
        <div class="bg-primary-light/40 dark:bg-primary/10 border border-primary/20 dark:border-primary/30 p-4 rounded-2xl space-y-4">
          <div>
            <label class="flex items-center justify-between text-sm font-semibold text-primary-dark dark:text-primary mb-1" for="orderTotal">
              <span class="flex items-center gap-1">Total amount <span class="info-icon-wrap">
                <span class="info-icon" title="Full amount of the order" data-tooltip="Full amount of the order (e.g. 200)" tabindex="0" role="button" aria-label="What is Order Total?">i</span>
                <span class="tooltip-popover">Full amount of the order (e.g. 200)</span>
              </span></span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">المجموع</span>
            </label>
            <input class="w-full bg-white/50 dark:bg-slate-900 border-transparent dark:border-transparent focus:ring-primary focus:border-primary rounded-lg py-2.5 px-4 text-right font-semibold text-primary-dark dark:text-primary" id="orderTotal" name="orderTotal" type="number" min="0" step="0.01" placeholder="e.g. 200">
          </div>
          <div>
            <label class="flex items-center justify-between text-sm font-semibold text-primary-dark dark:text-primary mb-1" for="amountPaid">
              <span class="flex items-center gap-1">Amount Paid <span class="info-icon-wrap">
                <span class="info-icon" title="What they've paid so far" data-tooltip="What they've paid so far (e.g. 0, 100, 200)" tabindex="0" role="button" aria-label="What is Amount Paid?">i</span>
                <span class="tooltip-popover">What they've paid so far (e.g. 0, 100, 200)</span>
              </span></span><span class="text-[10px] text-slate-400 font-normal" dir="rtl">المدفوع</span>
            </label>
            <input class="w-full bg-white/50 dark:bg-slate-900 border-transparent dark:border-transparent focus:ring-primary focus:border-primary rounded-lg py-2.5 px-4 text-right font-semibold text-primary-dark dark:text-primary" id="amountPaid" name="amountPaid" type="number" min="0" step="0.01" placeholder="e.g. 0, 100, 200">
          </div>
        </div>
      </div>
    </form>
  </main>

  <footer class="fixed bottom-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md border-t border-slate-100 dark:border-slate-800 p-4 pb-8 z-50">
    <div class="max-w-md mx-auto">
      <button type="submit" form="orderForm" id="submitBtn" class="btn-submit w-full bg-primary hover:bg-primary-dark text-white font-semibold py-4 rounded-xl shadow-lg shadow-primary/20 active:scale-[0.98] transition-all flex items-center justify-center gap-2">
        <span class="btn-text">Save</span>
        <span class="btn-loading" aria-hidden="true">Saving...</span>
      </button>
    </div>
  </footer>

  <script src="script.js?v=9"></script>
</body>
</html>
